{"abi":[{"type":"function","name":"cachedPrice","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"cachedPriceTimestamp","inputs":[],"outputs":[{"name":"","type":"uint48","internalType":"uint48"}],"stateMutability":"view"},{"type":"function","name":"updateCachedPrice","inputs":[{"name":"force","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"event","name":"TokenPriceUpdated","inputs":[{"name":"currentPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"previousPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"cachedPriceTimestamp","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"cachedPrice()":"f60fdcb3","cachedPriceTimestamp()":"e1d8153c","updateCachedPrice(bool)":"3ba9290f"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currentPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"cachedPriceTimestamp\",\"type\":\"uint256\"}],\"name\":\"TokenPriceUpdated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"cachedPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cachedPriceTimestamp\",\"outputs\":[{\"internalType\":\"uint48\",\"name\":\"\",\"type\":\"uint48\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"force\",\"type\":\"bool\"}],\"name\":\"updateCachedPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"updateCachedPrice(bool)\":{\"params\":{\"force\":\"true to force cache update, even if called after short time or the change is lower than the update threshold.\"},\"returns\":{\"_0\":\"newPrice the new cached token price\"}}},\"title\":\"Helper functions for dealing with various forms of price feed oracles.\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"cachedPrice()\":{\"notice\":\"The cached token price from the Oracle, always in (native-asset-per-token) * PRICE_DENOMINATOR format\"},\"cachedPriceTimestamp()\":{\"notice\":\"The timestamp of a block when the cached price was updated\"},\"updateCachedPrice(bool)\":{\"notice\":\"Updates the token price by fetching the latest price from the Oracle.\"}},\"notice\":\"Maintains a price cache and updates the current price if needed. In the best case scenario we have a direct oracle from the token to the native asset. Also support tokens that have no direct price oracle to the native asset. Sometimes oracles provide the price in the opposite direction of what we need in the moment.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol\":\"OracleHelper\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts-5/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":@uniswap/v3-core/=lib/uniswap-v3-core/\",\":@uniswap/v3-periphery/=lib/uniswap-v3-periphery/\",\":account-abstraction-v7/=lib/account-abstraction-v7/contracts/\",\":account-abstraction/=lib/account-abstraction/contracts/\",\":ds-test/=lib/openzeppelin-contracts-5/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-5/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":murky/=lib/murky/\",\":openzeppelin-contracts-5/=lib/openzeppelin-contracts-5/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":openzeppelin/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/\",\":uniswap-v3-core/=lib/uniswap-v3-core/\",\":uniswap-v3-periphery/=lib/uniswap-v3-periphery/contracts/\"]},\"sources\":{\"lib/account-abstraction-v7/contracts/samples/utils/IOracle.sol\":{\"keccak256\":\"0x73fcbc4b8384d3a3f3786f3991ed11fc917013a6ea212478327e081d01f7da09\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://068319a302037e96e56b6a3f6487f546cbc40af2461db704db5b275013383dd9\",\"dweb:/ipfs/QmcyWiK1avUP9ZxLKTGrfMKK9c88Dj6ccNjWbJthKDvrZz\"]},\"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol\":{\"keccak256\":\"0x0f55564a38900f8d70eee92102402fc6b80eb33e326befd7854cdb36a5aadec2\",\"license\":\"GPL-3.0\",\"urls\":[\"bzz-raw://f41c31a093aeedb26d13d7669cc0a18597e2fd0abb9ce8fb8794c52db812ce20\",\"dweb:/ipfs/QmfHPAifhx9SEA7dtc2bGspS8YKj8kZiiePboKV8YkF5Uw\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.26+commit.8a97fa7a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"currentPrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"previousPrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"cachedPriceTimestamp","type":"uint256","indexed":false}],"type":"event","name":"TokenPriceUpdated","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"cachedPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"cachedPriceTimestamp","outputs":[{"internalType":"uint48","name":"","type":"uint48"}]},{"inputs":[{"internalType":"bool","name":"force","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"updateCachedPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"updateCachedPrice(bool)":{"params":{"force":"true to force cache update, even if called after short time or the change is lower than the update threshold."},"returns":{"_0":"newPrice the new cached token price"}}},"version":1},"userdoc":{"kind":"user","methods":{"cachedPrice()":{"notice":"The cached token price from the Oracle, always in (native-asset-per-token) * PRICE_DENOMINATOR format"},"cachedPriceTimestamp()":{"notice":"The timestamp of a block when the cached price was updated"},"updateCachedPrice(bool)":{"notice":"Updates the token price by fetching the latest price from the Oracle."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts-5/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","@uniswap/v3-core/=lib/uniswap-v3-core/","@uniswap/v3-periphery/=lib/uniswap-v3-periphery/","account-abstraction-v7/=lib/account-abstraction-v7/contracts/","account-abstraction/=lib/account-abstraction/contracts/","ds-test/=lib/openzeppelin-contracts-5/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts-5/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","murky/=lib/murky/","openzeppelin-contracts-5/=lib/openzeppelin-contracts-5/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","openzeppelin/=lib/openzeppelin-contracts-upgradeable/contracts/","solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/","uniswap-v3-core/=lib/uniswap-v3-core/","uniswap-v3-periphery/=lib/uniswap-v3-periphery/contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol":"OracleHelper"},"evmVersion":"paris","libraries":{}},"sources":{"lib/account-abstraction-v7/contracts/samples/utils/IOracle.sol":{"keccak256":"0x73fcbc4b8384d3a3f3786f3991ed11fc917013a6ea212478327e081d01f7da09","urls":["bzz-raw://068319a302037e96e56b6a3f6487f546cbc40af2461db704db5b275013383dd9","dweb:/ipfs/QmcyWiK1avUP9ZxLKTGrfMKK9c88Dj6ccNjWbJthKDvrZz"],"license":"MIT"},"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol":{"keccak256":"0x0f55564a38900f8d70eee92102402fc6b80eb33e326befd7854cdb36a5aadec2","urls":["bzz-raw://f41c31a093aeedb26d13d7669cc0a18597e2fd0abb9ce8fb8794c52db812ce20","dweb:/ipfs/QmfHPAifhx9SEA7dtc2bGspS8YKj8kZiiePboKV8YkF5Uw"],"license":"GPL-3.0"}},"version":1},"storageLayout":{"storage":[{"astId":14236,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"cachedPrice","offset":0,"slot":"0","type":"t_uint256"},{"astId":14239,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"cachedPriceTimestamp","offset":0,"slot":"1","type":"t_uint48"},{"astId":14242,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"oracleHelperConfig","offset":0,"slot":"2","type":"t_struct(OracleHelperConfig)14233_storage"},{"astId":14245,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"tokenOracleDecimalPower","offset":0,"slot":"5","type":"t_uint128"},{"astId":14248,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"nativeOracleDecimalPower","offset":16,"slot":"5","type":"t_uint128"}],"types":{"t_bool":{"encoding":"inplace","label":"bool","numberOfBytes":"1"},"t_contract(IOracle)14191":{"encoding":"inplace","label":"contract IOracle","numberOfBytes":"20"},"t_struct(OracleHelperConfig)14233_storage":{"encoding":"inplace","label":"struct OracleHelper.OracleHelperConfig","numberOfBytes":"96","members":[{"astId":14209,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"cacheTimeToLive","offset":0,"slot":"0","type":"t_uint48"},{"astId":14212,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"maxOracleRoundAge","offset":6,"slot":"0","type":"t_uint48"},{"astId":14216,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"tokenOracle","offset":12,"slot":"0","type":"t_contract(IOracle)14191"},{"astId":14220,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"nativeOracle","offset":0,"slot":"1","type":"t_contract(IOracle)14191"},{"astId":14223,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"tokenToNativeOracle","offset":20,"slot":"1","type":"t_bool"},{"astId":14226,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"tokenOracleReverse","offset":21,"slot":"1","type":"t_bool"},{"astId":14229,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"nativeOracleReverse","offset":22,"slot":"1","type":"t_bool"},{"astId":14232,"contract":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol:OracleHelper","label":"priceUpdateThreshold","offset":0,"slot":"2","type":"t_uint256"}]},"t_uint128":{"encoding":"inplace","label":"uint128","numberOfBytes":"16"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"},"t_uint48":{"encoding":"inplace","label":"uint48","numberOfBytes":"6"}}},"ast":{"absolutePath":"lib/account-abstraction-v7/contracts/samples/utils/OracleHelper.sol","id":14574,"exportedSymbols":{"IOracle":[14191],"OracleHelper":[14573]},"nodeType":"SourceUnit","src":"36:8093:20","nodes":[{"id":14193,"nodeType":"PragmaDirective","src":"36:24:20","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":14194,"nodeType":"ImportDirective","src":"102:23:20","nodes":[],"absolutePath":"lib/account-abstraction-v7/contracts/samples/utils/IOracle.sol","file":"./IOracle.sol","nameLocation":"-1:-1:-1","scope":14574,"sourceUnit":14192,"symbolAliases":[],"unitAlias":""},{"id":14573,"nodeType":"ContractDefinition","src":"551:7577:20","nodes":[{"id":14203,"nodeType":"EventDefinition","src":"589:99:20","nodes":[],"anonymous":false,"eventSelector":"00d4fe314618b73a96886b87817a53a5ed51433b0234c85a5e9dafe2cb7b8842","name":"TokenPriceUpdated","nameLocation":"595:17:20","parameters":{"id":14202,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14197,"indexed":false,"mutability":"mutable","name":"currentPrice","nameLocation":"621:12:20","nodeType":"VariableDeclaration","scope":14203,"src":"613:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14196,"name":"uint256","nodeType":"ElementaryTypeName","src":"613:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":14199,"indexed":false,"mutability":"mutable","name":"previousPrice","nameLocation":"643:13:20","nodeType":"VariableDeclaration","scope":14203,"src":"635:21:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14198,"name":"uint256","nodeType":"ElementaryTypeName","src":"635:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":14201,"indexed":false,"mutability":"mutable","name":"cachedPriceTimestamp","nameLocation":"666:20:20","nodeType":"VariableDeclaration","scope":14203,"src":"658:28:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14200,"name":"uint256","nodeType":"ElementaryTypeName","src":"658:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"612:75:20"}},{"id":14206,"nodeType":"VariableDeclaration","src":"694:49:20","nodes":[],"constant":true,"mutability":"constant","name":"PRICE_DENOMINATOR","nameLocation":"719:17:20","scope":14573,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14204,"name":"uint256","nodeType":"ElementaryTypeName","src":"694:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31653236","id":14205,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"739:4:20","typeDescriptions":{"typeIdentifier":"t_rational_100000000000000000000000000_by_1","typeString":"int_const 100000000000000000000000000"},"value":"1e26"},"visibility":"private"},{"id":14233,"nodeType":"StructDefinition","src":"750:1287:20","nodes":[],"canonicalName":"OracleHelper.OracleHelperConfig","members":[{"constant":false,"id":14209,"mutability":"mutable","name":"cacheTimeToLive","nameLocation":"908:15:20","nodeType":"VariableDeclaration","scope":14233,"src":"901:22:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":14208,"name":"uint48","nodeType":"ElementaryTypeName","src":"901:6:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"},{"constant":false,"id":14212,"mutability":"mutable","name":"maxOracleRoundAge","nameLocation":"1014:17:20","nodeType":"VariableDeclaration","scope":14233,"src":"1007:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":14211,"name":"uint48","nodeType":"ElementaryTypeName","src":"1007:6:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"},{"constant":false,"id":14216,"mutability":"mutable","name":"tokenOracle","nameLocation":"1128:11:20","nodeType":"VariableDeclaration","scope":14233,"src":"1120:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"},"typeName":{"id":14215,"nodeType":"UserDefinedTypeName","pathNode":{"id":14214,"name":"IOracle","nameLocations":["1120:7:20"],"nodeType":"IdentifierPath","referencedDeclaration":14191,"src":"1120:7:20"},"referencedDeclaration":14191,"src":"1120:7:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"visibility":"internal"},{"constant":false,"id":14220,"mutability":"mutable","name":"nativeOracle","nameLocation":"1296:12:20","nodeType":"VariableDeclaration","scope":14233,"src":"1288:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"},"typeName":{"id":14219,"nodeType":"UserDefinedTypeName","pathNode":{"id":14218,"name":"IOracle","nameLocations":["1288:7:20"],"nodeType":"IdentifierPath","referencedDeclaration":14191,"src":"1288:7:20"},"referencedDeclaration":14191,"src":"1288:7:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"visibility":"internal"},{"constant":false,"id":14223,"mutability":"mutable","name":"tokenToNativeOracle","nameLocation":"1515:19:20","nodeType":"VariableDeclaration","scope":14233,"src":"1510:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14222,"name":"bool","nodeType":"ElementaryTypeName","src":"1510:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":14226,"mutability":"mutable","name":"tokenOracleReverse","nameLocation":"1689:18:20","nodeType":"VariableDeclaration","scope":14233,"src":"1684:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14225,"name":"bool","nodeType":"ElementaryTypeName","src":"1684:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":14229,"mutability":"mutable","name":"nativeOracleReverse","nameLocation":"1847:19:20","nodeType":"VariableDeclaration","scope":14233,"src":"1842:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14228,"name":"bool","nodeType":"ElementaryTypeName","src":"1842:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":14232,"mutability":"mutable","name":"priceUpdateThreshold","nameLocation":"2009:20:20","nodeType":"VariableDeclaration","scope":14233,"src":"2001:28:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14231,"name":"uint256","nodeType":"ElementaryTypeName","src":"2001:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"name":"OracleHelperConfig","nameLocation":"757:18:20","scope":14573,"visibility":"public"},{"id":14236,"nodeType":"VariableDeclaration","src":"2161:26:20","nodes":[],"constant":false,"documentation":{"id":14234,"nodeType":"StructuredDocumentation","src":"2043:113:20","text":"@notice The cached token price from the Oracle, always in (native-asset-per-token) * PRICE_DENOMINATOR format"},"functionSelector":"f60fdcb3","mutability":"mutable","name":"cachedPrice","nameLocation":"2176:11:20","scope":14573,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14235,"name":"uint256","nodeType":"ElementaryTypeName","src":"2161:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":14239,"nodeType":"VariableDeclaration","src":"2269:34:20","nodes":[],"constant":false,"documentation":{"id":14237,"nodeType":"StructuredDocumentation","src":"2194:70:20","text":"@notice The timestamp of a block when the cached price was updated"},"functionSelector":"e1d8153c","mutability":"mutable","name":"cachedPriceTimestamp","nameLocation":"2283:20:20","scope":14573,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":14238,"name":"uint48","nodeType":"ElementaryTypeName","src":"2269:6:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"public"},{"id":14242,"nodeType":"VariableDeclaration","src":"2310:45:20","nodes":[],"constant":false,"mutability":"mutable","name":"oracleHelperConfig","nameLocation":"2337:18:20","scope":14573,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig"},"typeName":{"id":14241,"nodeType":"UserDefinedTypeName","pathNode":{"id":14240,"name":"OracleHelperConfig","nameLocations":["2310:18:20"],"nodeType":"IdentifierPath","referencedDeclaration":14233,"src":"2310:18:20"},"referencedDeclaration":14233,"src":"2310:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage_ptr","typeString":"struct OracleHelper.OracleHelperConfig"}},"visibility":"private"},{"id":14245,"nodeType":"VariableDeclaration","src":"2447:39:20","nodes":[],"constant":false,"documentation":{"id":14243,"nodeType":"StructuredDocumentation","src":"2362:80:20","text":"@notice The \"10^(tokenOracle.decimals)\" value used for the price calculation"},"mutability":"mutable","name":"tokenOracleDecimalPower","nameLocation":"2463:23:20","scope":14573,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":14244,"name":"uint128","nodeType":"ElementaryTypeName","src":"2447:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"private"},{"id":14248,"nodeType":"VariableDeclaration","src":"2579:40:20","nodes":[],"constant":false,"documentation":{"id":14246,"nodeType":"StructuredDocumentation","src":"2493:81:20","text":"@notice The \"10^(nativeOracle.decimals)\" value used for the price calculation"},"mutability":"mutable","name":"nativeOracleDecimalPower","nameLocation":"2595:24:20","scope":14573,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":14247,"name":"uint128","nodeType":"ElementaryTypeName","src":"2579:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"private"},{"id":14267,"nodeType":"FunctionDefinition","src":"2626:246:20","nodes":[],"body":{"id":14266,"nodeType":"Block","src":"2700:172:20","nodes":[],"statements":[{"expression":{"id":14260,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14254,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14236,"src":"2710:11:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"arguments":[{"id":14257,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2729:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":14256,"name":"uint256","nodeType":"ElementaryTypeName","src":"2729:7:20","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":14255,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"2724:4:20","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":14258,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2724:13:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":14259,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2738:3:20","memberName":"max","nodeType":"MemberAccess","src":"2724:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2710:31:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":14261,"nodeType":"ExpressionStatement","src":"2710:31:20"},{"expression":{"arguments":[{"id":14263,"name":"_oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14251,"src":"2836:19:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}],"id":14262,"name":"_setOracleConfiguration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14333,"src":"2799:23:20","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_struct$_OracleHelperConfig_$14233_memory_ptr_$returns$__$","typeString":"function (struct OracleHelper.OracleHelperConfig memory)"}},"id":14264,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2799:66:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14265,"nodeType":"ExpressionStatement","src":"2799:66:20"}]},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":14252,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14251,"mutability":"mutable","name":"_oracleHelperConfig","nameLocation":"2674:19:20","nodeType":"VariableDeclaration","scope":14267,"src":"2648:45:20","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig"},"typeName":{"id":14250,"nodeType":"UserDefinedTypeName","pathNode":{"id":14249,"name":"OracleHelperConfig","nameLocations":["2648:18:20"],"nodeType":"IdentifierPath","referencedDeclaration":14233,"src":"2648:18:20"},"referencedDeclaration":14233,"src":"2648:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage_ptr","typeString":"struct OracleHelper.OracleHelperConfig"}},"visibility":"internal"}],"src":"2638:61:20"},"returnParameters":{"id":14253,"nodeType":"ParameterList","parameters":[],"src":"2700:0:20"},"scope":14573,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":14333,"nodeType":"FunctionDefinition","src":"2878:698:20","nodes":[],"body":{"id":14332,"nodeType":"Block","src":"2980:596:20","nodes":[],"statements":[{"expression":{"id":14275,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14273,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"2990:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":14274,"name":"_oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14270,"src":"3011:19:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}},"src":"2990:40:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14276,"nodeType":"ExpressionStatement","src":"2990:40:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14281,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":14278,"name":"_oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14270,"src":"3048:19:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}},"id":14279,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3068:20:20","memberName":"priceUpdateThreshold","nodeType":"MemberAccess","referencedDeclaration":14232,"src":"3048:40:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"id":14280,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14206,"src":"3092:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3048:61:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a20757064617465207468726573686f6c6420746f6f2068696768","id":14282,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3111:32:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_8a566cb33a697901d095335b5e9f970dfcd1d1aec6492c3e3a0bddbf42e69563","typeString":"literal_string \"TPM: update threshold too high\""},"value":"TPM: update threshold too high"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_8a566cb33a697901d095335b5e9f970dfcd1d1aec6492c3e3a0bddbf42e69563","typeString":"literal_string \"TPM: update threshold too high\""}],"id":14277,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"3040:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":14283,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3040:104:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14284,"nodeType":"ExpressionStatement","src":"3040:104:20"},{"expression":{"id":14295,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14285,"name":"tokenOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14245,"src":"3154:23:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14293,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":14288,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3188:2:20","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"expression":{"id":14289,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"3194:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14290,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3213:11:20","memberName":"tokenOracle","nodeType":"MemberAccess","referencedDeclaration":14216,"src":"3194:30:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"id":14291,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3225:8:20","memberName":"decimals","nodeType":"MemberAccess","referencedDeclaration":14177,"src":"3194:39:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint8_$","typeString":"function () view external returns (uint8)"}},"id":14292,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3194:41:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"3188:47:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":14287,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3180:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":14286,"name":"uint128","nodeType":"ElementaryTypeName","src":"3180:7:20","typeDescriptions":{}}},"id":14294,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3180:56:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"3154:82:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":14296,"nodeType":"ExpressionStatement","src":"3154:82:20"},{"condition":{"expression":{"id":14297,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"3250:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14298,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3269:19:20","memberName":"tokenToNativeOracle","nodeType":"MemberAccess","referencedDeclaration":14223,"src":"3250:38:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":14330,"nodeType":"Block","src":"3461:109:20","statements":[{"expression":{"id":14328,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14318,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14248,"src":"3475:24:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14326,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":14321,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3510:2:20","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"expression":{"id":14322,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"3516:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14323,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3535:12:20","memberName":"nativeOracle","nodeType":"MemberAccess","referencedDeclaration":14220,"src":"3516:31:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"id":14324,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3548:8:20","memberName":"decimals","nodeType":"MemberAccess","referencedDeclaration":14177,"src":"3516:40:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint8_$","typeString":"function () view external returns (uint8)"}},"id":14325,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3516:42:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"3510:48:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":14320,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3502:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":14319,"name":"uint128","nodeType":"ElementaryTypeName","src":"3502:7:20","typeDescriptions":{}}},"id":14327,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3502:57:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"3475:84:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":14329,"nodeType":"ExpressionStatement","src":"3475:84:20"}]},"id":14331,"nodeType":"IfStatement","src":"3246:324:20","trueBody":{"id":14317,"nodeType":"Block","src":"3290:165:20","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":14309,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"expression":{"id":14302,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"3320:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14303,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3339:12:20","memberName":"nativeOracle","nodeType":"MemberAccess","referencedDeclaration":14220,"src":"3320:31:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}],"id":14301,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3312:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":14300,"name":"address","nodeType":"ElementaryTypeName","src":"3312:7:20","typeDescriptions":{}}},"id":14304,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3312:40:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":14307,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3364:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":14306,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3356:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":14305,"name":"address","nodeType":"ElementaryTypeName","src":"3356:7:20","typeDescriptions":{}}},"id":14308,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3356:10:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3312:54:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a206e6174697665206f7261636c65206d757374206265207a65726f","id":14310,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3368:33:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_5c9a726e30dc2076d99e7de38a287cb3806293b04e29f1362f7c34718468e7d1","typeString":"literal_string \"TPM: native oracle must be zero\""},"value":"TPM: native oracle must be zero"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_5c9a726e30dc2076d99e7de38a287cb3806293b04e29f1362f7c34718468e7d1","typeString":"literal_string \"TPM: native oracle must be zero\""}],"id":14299,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"3304:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":14311,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3304:98:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14312,"nodeType":"ExpressionStatement","src":"3304:98:20"},{"expression":{"id":14315,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14313,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14248,"src":"3416:24:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"31","id":14314,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3443:1:20","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"3416:28:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":14316,"nodeType":"ExpressionStatement","src":"3416:28:20"}]}}]},"implemented":true,"kind":"function","modifiers":[],"name":"_setOracleConfiguration","nameLocation":"2887:23:20","parameters":{"id":14271,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14270,"mutability":"mutable","name":"_oracleHelperConfig","nameLocation":"2946:19:20","nodeType":"VariableDeclaration","scope":14333,"src":"2920:45:20","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig"},"typeName":{"id":14269,"nodeType":"UserDefinedTypeName","pathNode":{"id":14268,"name":"OracleHelperConfig","nameLocations":["2920:18:20"],"nodeType":"IdentifierPath","referencedDeclaration":14233,"src":"2920:18:20"},"referencedDeclaration":14233,"src":"2920:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage_ptr","typeString":"struct OracleHelper.OracleHelperConfig"}},"visibility":"internal"}],"src":"2910:61:20"},"returnParameters":{"id":14272,"nodeType":"ParameterList","parameters":[],"src":"2980:0:20"},"scope":14573,"stateMutability":"nonpayable","virtual":false,"visibility":"private"},{"id":14467,"nodeType":"FunctionDefinition","src":"3851:1613:20","nodes":[],"body":{"id":14466,"nodeType":"Block","src":"3915:1549:20","nodes":[],"statements":[{"assignments":[14342],"declarations":[{"constant":false,"id":14342,"mutability":"mutable","name":"cacheTimeToLive","nameLocation":"3933:15:20","nodeType":"VariableDeclaration","scope":14466,"src":"3925:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14341,"name":"uint256","nodeType":"ElementaryTypeName","src":"3925:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14345,"initialValue":{"expression":{"id":14343,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"3951:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14344,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3970:15:20","memberName":"cacheTimeToLive","nodeType":"MemberAccess","referencedDeclaration":14209,"src":"3951:34:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"nodeType":"VariableDeclarationStatement","src":"3925:60:20"},{"assignments":[14347],"declarations":[{"constant":false,"id":14347,"mutability":"mutable","name":"cacheAge","nameLocation":"4003:8:20","nodeType":"VariableDeclaration","scope":14466,"src":"3995:16:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14346,"name":"uint256","nodeType":"ElementaryTypeName","src":"3995:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14352,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14351,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":14348,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4014:5:20","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":14349,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4020:9:20","memberName":"timestamp","nodeType":"MemberAccess","src":"4014:15:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":14350,"name":"cachedPriceTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14239,"src":"4032:20:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"src":"4014:38:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3995:57:20"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":14358,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14354,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"4066:6:20","subExpression":{"id":14353,"name":"force","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14336,"src":"4067:5:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14357,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14355,"name":"cacheAge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14347,"src":"4076:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"id":14356,"name":"cacheTimeToLive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14342,"src":"4088:15:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4076:27:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4066:37:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":14362,"nodeType":"IfStatement","src":"4062:86:20","trueBody":{"id":14361,"nodeType":"Block","src":"4105:43:20","statements":[{"expression":{"id":14359,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14236,"src":"4126:11:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":14340,"id":14360,"nodeType":"Return","src":"4119:18:20"}]}},{"assignments":[14364],"declarations":[{"constant":false,"id":14364,"mutability":"mutable","name":"priceUpdateThreshold","nameLocation":"4165:20:20","nodeType":"VariableDeclaration","scope":14466,"src":"4157:28:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14363,"name":"uint256","nodeType":"ElementaryTypeName","src":"4157:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14367,"initialValue":{"expression":{"id":14365,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"4188:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14366,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4207:20:20","memberName":"priceUpdateThreshold","nodeType":"MemberAccess","referencedDeclaration":14232,"src":"4188:39:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4157:70:20"},{"assignments":[14370],"declarations":[{"constant":false,"id":14370,"mutability":"mutable","name":"tokenOracle","nameLocation":"4245:11:20","nodeType":"VariableDeclaration","scope":14466,"src":"4237:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"},"typeName":{"id":14369,"nodeType":"UserDefinedTypeName","pathNode":{"id":14368,"name":"IOracle","nameLocations":["4237:7:20"],"nodeType":"IdentifierPath","referencedDeclaration":14191,"src":"4237:7:20"},"referencedDeclaration":14191,"src":"4237:7:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"visibility":"internal"}],"id":14373,"initialValue":{"expression":{"id":14371,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"4259:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14372,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4278:11:20","memberName":"tokenOracle","nodeType":"MemberAccess","referencedDeclaration":14216,"src":"4259:30:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"nodeType":"VariableDeclarationStatement","src":"4237:52:20"},{"assignments":[14376],"declarations":[{"constant":false,"id":14376,"mutability":"mutable","name":"nativeOracle","nameLocation":"4307:12:20","nodeType":"VariableDeclaration","scope":14466,"src":"4299:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"},"typeName":{"id":14375,"nodeType":"UserDefinedTypeName","pathNode":{"id":14374,"name":"IOracle","nameLocations":["4299:7:20"],"nodeType":"IdentifierPath","referencedDeclaration":14191,"src":"4299:7:20"},"referencedDeclaration":14191,"src":"4299:7:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"visibility":"internal"}],"id":14379,"initialValue":{"expression":{"id":14377,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"4322:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14378,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4341:12:20","memberName":"nativeOracle","nodeType":"MemberAccess","referencedDeclaration":14220,"src":"4322:31:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"nodeType":"VariableDeclarationStatement","src":"4299:54:20"},{"assignments":[14381],"declarations":[{"constant":false,"id":14381,"mutability":"mutable","name":"_cachedPrice","nameLocation":"4372:12:20","nodeType":"VariableDeclaration","scope":14466,"src":"4364:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14380,"name":"uint256","nodeType":"ElementaryTypeName","src":"4364:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14383,"initialValue":{"id":14382,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14236,"src":"4387:11:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4364:34:20"},{"assignments":[14385],"declarations":[{"constant":false,"id":14385,"mutability":"mutable","name":"tokenPrice","nameLocation":"4416:10:20","nodeType":"VariableDeclaration","scope":14466,"src":"4408:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14384,"name":"uint256","nodeType":"ElementaryTypeName","src":"4408:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14389,"initialValue":{"arguments":[{"id":14387,"name":"tokenOracle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14370,"src":"4440:11:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}],"id":14386,"name":"fetchPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14572,"src":"4429:10:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_contract$_IOracle_$14191_$returns$_t_uint256_$","typeString":"function (contract IOracle) view returns (uint256)"}},"id":14388,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4429:23:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4408:44:20"},{"assignments":[14391],"declarations":[{"constant":false,"id":14391,"mutability":"mutable","name":"nativeAssetPrice","nameLocation":"4470:16:20","nodeType":"VariableDeclaration","scope":14466,"src":"4462:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14390,"name":"uint256","nodeType":"ElementaryTypeName","src":"4462:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14393,"initialValue":{"hexValue":"31","id":14392,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4489:1:20","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"nodeType":"VariableDeclarationStatement","src":"4462:28:20"},{"condition":{"id":14396,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"4625:39:20","subExpression":{"expression":{"id":14394,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"4626:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14395,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4645:19:20","memberName":"tokenToNativeOracle","nodeType":"MemberAccess","referencedDeclaration":14223,"src":"4626:38:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":14404,"nodeType":"IfStatement","src":"4621:113:20","trueBody":{"id":14403,"nodeType":"Block","src":"4666:68:20","statements":[{"expression":{"id":14401,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14397,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14391,"src":"4680:16:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":14399,"name":"nativeOracle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14376,"src":"4710:12:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}],"id":14398,"name":"fetchPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14572,"src":"4699:10:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_contract$_IOracle_$14191_$returns$_t_uint256_$","typeString":"function (contract IOracle) view returns (uint256)"}},"id":14400,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4699:24:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4680:43:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":14402,"nodeType":"ExpressionStatement","src":"4680:43:20"}]}},{"assignments":[14406],"declarations":[{"constant":false,"id":14406,"mutability":"mutable","name":"newPrice","nameLocation":"4751:8:20","nodeType":"VariableDeclaration","scope":14466,"src":"4743:16:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14405,"name":"uint256","nodeType":"ElementaryTypeName","src":"4743:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14415,"initialValue":{"arguments":[{"id":14408,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14385,"src":"4790:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":14409,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14391,"src":"4814:16:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":14410,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"4844:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14411,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4863:18:20","memberName":"tokenOracleReverse","nodeType":"MemberAccess","referencedDeclaration":14226,"src":"4844:37:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":14412,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"4895:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14413,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4914:19:20","memberName":"nativeOracleReverse","nodeType":"MemberAccess","referencedDeclaration":14229,"src":"4895:38:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":14407,"name":"calculatePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14518,"src":"4762:14:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$","typeString":"function (uint256,uint256,bool,bool) view returns (uint256)"}},"id":14414,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4762:181:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4743:200:20"},{"assignments":[14417],"declarations":[{"constant":false,"id":14417,"mutability":"mutable","name":"priceRatio","nameLocation":"4961:10:20","nodeType":"VariableDeclaration","scope":14466,"src":"4953:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14416,"name":"uint256","nodeType":"ElementaryTypeName","src":"4953:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":14423,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14422,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14420,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14418,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14206,"src":"4974:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":14419,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14406,"src":"4994:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4974:28:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":14421,"name":"_cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14381,"src":"5005:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4974:43:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4953:64:20"},{"assignments":[14425],"declarations":[{"constant":false,"id":14425,"mutability":"mutable","name":"updateRequired","nameLocation":"5032:14:20","nodeType":"VariableDeclaration","scope":14466,"src":"5027:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14424,"name":"bool","nodeType":"ElementaryTypeName","src":"5027:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":14439,"initialValue":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":14438,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":14432,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14426,"name":"force","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14336,"src":"5049:5:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14431,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14427,"name":"priceRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14417,"src":"5070:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14430,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14428,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14206,"src":"5083:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":14429,"name":"priceUpdateThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14364,"src":"5103:20:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5083:40:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5070:53:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5049:74:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14437,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14433,"name":"priceRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14417,"src":"5139:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14436,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14434,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14206,"src":"5152:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":14435,"name":"priceUpdateThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14364,"src":"5172:20:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5152:40:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5139:53:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5049:143:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"5027:165:20"},{"condition":{"id":14441,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"5206:15:20","subExpression":{"id":14440,"name":"updateRequired","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14425,"src":"5207:14:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":14445,"nodeType":"IfStatement","src":"5202:65:20","trueBody":{"id":14444,"nodeType":"Block","src":"5223:44:20","statements":[{"expression":{"id":14442,"name":"_cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14381,"src":"5244:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":14340,"id":14443,"nodeType":"Return","src":"5237:19:20"}]}},{"expression":{"id":14448,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14446,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14236,"src":"5276:11:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":14447,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14406,"src":"5290:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5276:22:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":14449,"nodeType":"ExpressionStatement","src":"5276:22:20"},{"expression":{"id":14456,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14450,"name":"cachedPriceTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14239,"src":"5308:20:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":14453,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5338:5:20","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":14454,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5344:9:20","memberName":"timestamp","nodeType":"MemberAccess","src":"5338:15:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":14452,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5331:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_uint48_$","typeString":"type(uint48)"},"typeName":{"id":14451,"name":"uint48","nodeType":"ElementaryTypeName","src":"5331:6:20","typeDescriptions":{}}},"id":14455,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5331:23:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"src":"5308:46:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"id":14457,"nodeType":"ExpressionStatement","src":"5308:46:20"},{"eventCall":{"arguments":[{"id":14459,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14406,"src":"5387:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":14460,"name":"_cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14381,"src":"5397:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":14461,"name":"cachedPriceTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14239,"src":"5411:20:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":14458,"name":"TokenPriceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14203,"src":"5369:17:20","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256,uint256)"}},"id":14462,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5369:63:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14463,"nodeType":"EmitStatement","src":"5364:68:20"},{"expression":{"id":14464,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14406,"src":"5449:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":14340,"id":14465,"nodeType":"Return","src":"5442:15:20"}]},"documentation":{"id":14334,"nodeType":"StructuredDocumentation","src":"3582:264:20","text":"@notice Updates the token price by fetching the latest price from the Oracle.\n @param force true to force cache update, even if called after short time or the change is lower than the update threshold.\n @return newPrice the new cached token price"},"functionSelector":"3ba9290f","implemented":true,"kind":"function","modifiers":[],"name":"updateCachedPrice","nameLocation":"3860:17:20","parameters":{"id":14337,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14336,"mutability":"mutable","name":"force","nameLocation":"3883:5:20","nodeType":"VariableDeclaration","scope":14467,"src":"3878:10:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14335,"name":"bool","nodeType":"ElementaryTypeName","src":"3878:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3877:12:20"},"returnParameters":{"id":14340,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14339,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":14467,"src":"3906:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14338,"name":"uint256","nodeType":"ElementaryTypeName","src":"3906:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3905:9:20"},"scope":14573,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":14518,"nodeType":"FunctionDefinition","src":"6085:1280:20","nodes":[],"body":{"id":14517,"nodeType":"Block","src":"6274:1091:20","nodes":[],"statements":[{"condition":{"id":14481,"name":"tokenOracleReverse","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14474,"src":"6352:18:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":14499,"nodeType":"Block","src":"6572:181:20","statements":[{"expression":{"id":14497,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14491,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14470,"src":"6673:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14496,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14494,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14492,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14206,"src":"6686:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":14493,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14470,"src":"6706:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6686:30:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":14495,"name":"tokenOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14245,"src":"6719:23:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"6686:56:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6673:69:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":14498,"nodeType":"ExpressionStatement","src":"6673:69:20"}]},"id":14500,"nodeType":"IfStatement","src":"6348:405:20","trueBody":{"id":14490,"nodeType":"Block","src":"6372:194:20","statements":[{"expression":{"id":14488,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14482,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14470,"src":"6486:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14487,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14485,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14483,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14206,"src":"6499:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":14484,"name":"tokenOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14245,"src":"6519:23:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"6499:43:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":14486,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14470,"src":"6545:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6499:56:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6486:69:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":14489,"nodeType":"ExpressionStatement","src":"6486:69:20"}]}},{"condition":{"id":14501,"name":"nativeOracleReverse","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14476,"src":"6767:19:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":14515,"nodeType":"Block","src":"7078:281:20","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14513,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14511,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14509,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14470,"src":"7292:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":14510,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14248,"src":"7305:24:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"7292:37:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":14512,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14472,"src":"7332:16:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7292:56:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":14480,"id":14514,"nodeType":"Return","src":"7285:63:20"}]},"id":14516,"nodeType":"IfStatement","src":"6763:596:20","trueBody":{"id":14508,"nodeType":"Block","src":"6788:284:20","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14506,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14504,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14502,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14472,"src":"7005:16:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":14503,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14470,"src":"7024:10:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7005:29:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":14505,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14248,"src":"7037:24:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"7005:56:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":14480,"id":14507,"nodeType":"Return","src":"6998:63:20"}]}}]},"documentation":{"id":14468,"nodeType":"StructuredDocumentation","src":"5470:610:20","text":" Calculate the effective price of the selected token denominated in native asset.\n @param tokenPrice - the price of the token relative to a native asset or a bridging asset like the U.S. dollar.\n @param nativeAssetPrice - the price of the native asset relative to a bridging asset or 1 if no bridging needed.\n @param tokenOracleReverse - flag indicating direction of the \"tokenPrice\".\n @param nativeOracleReverse - flag indicating direction of the \"nativeAssetPrice\".\n @return the native-asset-per-token price multiplied by the PRICE_DENOMINATOR constant."},"implemented":true,"kind":"function","modifiers":[],"name":"calculatePrice","nameLocation":"6094:14:20","parameters":{"id":14477,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14470,"mutability":"mutable","name":"tokenPrice","nameLocation":"6126:10:20","nodeType":"VariableDeclaration","scope":14518,"src":"6118:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14469,"name":"uint256","nodeType":"ElementaryTypeName","src":"6118:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":14472,"mutability":"mutable","name":"nativeAssetPrice","nameLocation":"6154:16:20","nodeType":"VariableDeclaration","scope":14518,"src":"6146:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14471,"name":"uint256","nodeType":"ElementaryTypeName","src":"6146:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":14474,"mutability":"mutable","name":"tokenOracleReverse","nameLocation":"6185:18:20","nodeType":"VariableDeclaration","scope":14518,"src":"6180:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14473,"name":"bool","nodeType":"ElementaryTypeName","src":"6180:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":14476,"mutability":"mutable","name":"nativeOracleReverse","nameLocation":"6218:19:20","nodeType":"VariableDeclaration","scope":14518,"src":"6213:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":14475,"name":"bool","nodeType":"ElementaryTypeName","src":"6213:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"6108:135:20"},"returnParameters":{"id":14480,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14479,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":14518,"src":"6266:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14478,"name":"uint256","nodeType":"ElementaryTypeName","src":"6266:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6265:9:20"},"scope":14573,"stateMutability":"view","virtual":false,"visibility":"private"},{"id":14572,"nodeType":"FunctionDefinition","src":"7664:462:20","nodes":[],"body":{"id":14571,"nodeType":"Block","src":"7739:387:20","nodes":[],"statements":[{"assignments":[14528,14530,null,14532,14534],"declarations":[{"constant":false,"id":14528,"mutability":"mutable","name":"roundId","nameLocation":"7757:7:20","nodeType":"VariableDeclaration","scope":14571,"src":"7750:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"},"typeName":{"id":14527,"name":"uint80","nodeType":"ElementaryTypeName","src":"7750:6:20","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"visibility":"internal"},{"constant":false,"id":14530,"mutability":"mutable","name":"answer","nameLocation":"7773:6:20","nodeType":"VariableDeclaration","scope":14571,"src":"7766:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":14529,"name":"int256","nodeType":"ElementaryTypeName","src":"7766:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},null,{"constant":false,"id":14532,"mutability":"mutable","name":"updatedAt","nameLocation":"7790:9:20","nodeType":"VariableDeclaration","scope":14571,"src":"7782:17:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14531,"name":"uint256","nodeType":"ElementaryTypeName","src":"7782:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":14534,"mutability":"mutable","name":"answeredInRound","nameLocation":"7808:15:20","nodeType":"VariableDeclaration","scope":14571,"src":"7801:22:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"},"typeName":{"id":14533,"name":"uint80","nodeType":"ElementaryTypeName","src":"7801:6:20","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"visibility":"internal"}],"id":14538,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":14535,"name":"_oracle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14522,"src":"7827:7:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"id":14536,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7835:15:20","memberName":"latestRoundData","nodeType":"MemberAccess","referencedDeclaration":14190,"src":"7827:23:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint80_$_t_int256_$_t_uint256_$_t_uint256_$_t_uint80_$","typeString":"function () view external returns (uint80,int256,uint256,uint256,uint80)"}},"id":14537,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7827:25:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint80_$_t_int256_$_t_uint256_$_t_uint256_$_t_uint80_$","typeString":"tuple(uint80,int256,uint256,uint256,uint80)"}},"nodeType":"VariableDeclarationStatement","src":"7749:103:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":14542,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14540,"name":"answer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14530,"src":"7870:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":14541,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7879:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7870:10:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a20436861696e6c696e6b207072696365203c3d2030","id":14543,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"7882:27:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_230841b91566b8ef8494467ac1066600e239c03fbb1726ac05edb7eb6426bf5f","typeString":"literal_string \"TPM: Chainlink price <= 0\""},"value":"TPM: Chainlink price <= 0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_230841b91566b8ef8494467ac1066600e239c03fbb1726ac05edb7eb6426bf5f","typeString":"literal_string \"TPM: Chainlink price <= 0\""}],"id":14539,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"7862:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":14544,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7862:48:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14545,"nodeType":"ExpressionStatement","src":"7862:48:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14553,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14547,"name":"updatedAt","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14532,"src":"7928:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14552,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":14548,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"7941:5:20","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":14549,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7947:9:20","memberName":"timestamp","nodeType":"MemberAccess","src":"7941:15:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"id":14550,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14242,"src":"7959:18:20","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$14233_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":14551,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7978:17:20","memberName":"maxOracleRoundAge","nodeType":"MemberAccess","referencedDeclaration":14212,"src":"7959:36:20","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"src":"7941:54:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7928:67:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a20496e636f6d706c65746520726f756e64","id":14554,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"7997:23:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_734b18f0d91ef88524431e4a4badc94fe5958912efef3c7a4b031041665230f8","typeString":"literal_string \"TPM: Incomplete round\""},"value":"TPM: Incomplete round"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_734b18f0d91ef88524431e4a4badc94fe5958912efef3c7a4b031041665230f8","typeString":"literal_string \"TPM: Incomplete round\""}],"id":14546,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"7920:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":14555,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7920:101:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14556,"nodeType":"ExpressionStatement","src":"7920:101:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint80","typeString":"uint80"},"id":14560,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":14558,"name":"answeredInRound","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14534,"src":"8039:15:20","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":14559,"name":"roundId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14528,"src":"8058:7:20","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"src":"8039:26:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a205374616c65207072696365","id":14561,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"8067:18:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_ff3d7b84e0669faa595987a28f54ed7b7d788d6b153fece7f34e88484bde9567","typeString":"literal_string \"TPM: Stale price\""},"value":"TPM: Stale price"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_ff3d7b84e0669faa595987a28f54ed7b7d788d6b153fece7f34e88484bde9567","typeString":"literal_string \"TPM: Stale price\""}],"id":14557,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"8031:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":14562,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8031:55:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":14563,"nodeType":"ExpressionStatement","src":"8031:55:20"},{"expression":{"id":14569,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":14564,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14525,"src":"8096:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":14567,"name":"answer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14530,"src":"8112:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":14566,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"8104:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":14565,"name":"uint256","nodeType":"ElementaryTypeName","src":"8104:7:20","typeDescriptions":{}}},"id":14568,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8104:15:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8096:23:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":14570,"nodeType":"ExpressionStatement","src":"8096:23:20"}]},"documentation":{"id":14519,"nodeType":"StructuredDocumentation","src":"7371:288:20","text":"@notice Fetches the latest price from the given Oracle.\n @dev This function is used to get the latest price from the tokenOracle or nativeOracle.\n @param _oracle The Oracle contract to fetch the price from.\n @return price The latest price fetched from the Oracle."},"implemented":true,"kind":"function","modifiers":[],"name":"fetchPrice","nameLocation":"7673:10:20","parameters":{"id":14523,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14522,"mutability":"mutable","name":"_oracle","nameLocation":"7692:7:20","nodeType":"VariableDeclaration","scope":14572,"src":"7684:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"},"typeName":{"id":14521,"nodeType":"UserDefinedTypeName","pathNode":{"id":14520,"name":"IOracle","nameLocations":["7684:7:20"],"nodeType":"IdentifierPath","referencedDeclaration":14191,"src":"7684:7:20"},"referencedDeclaration":14191,"src":"7684:7:20","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$14191","typeString":"contract IOracle"}},"visibility":"internal"}],"src":"7683:17:20"},"returnParameters":{"id":14526,"nodeType":"ParameterList","parameters":[{"constant":false,"id":14525,"mutability":"mutable","name":"price","nameLocation":"7732:5:20","nodeType":"VariableDeclaration","scope":14572,"src":"7724:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":14524,"name":"uint256","nodeType":"ElementaryTypeName","src":"7724:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7723:15:20"},"scope":14573,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":true,"baseContracts":[],"canonicalName":"OracleHelper","contractDependencies":[],"contractKind":"contract","documentation":{"id":14195,"nodeType":"StructuredDocumentation","src":"127:424:20","text":"@title Helper functions for dealing with various forms of price feed oracles.\n @notice Maintains a price cache and updates the current price if needed.\n In the best case scenario we have a direct oracle from the token to the native asset.\n Also support tokens that have no direct price oracle to the native asset.\n Sometimes oracles provide the price in the opposite direction of what we need in the moment."},"fullyImplemented":true,"linearizedBaseContracts":[14573],"name":"OracleHelper","nameLocation":"569:12:20","scope":14574,"usedErrors":[],"usedEvents":[14203]}],"license":"GPL-3.0"},"id":20}